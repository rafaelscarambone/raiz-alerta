<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RaizAlerta - Configura√ß√µes</title>
    <link rel="stylesheet" href="configuracoes.css">
    <script src="configuracoes.js" defer></script>
</head>
<body>
    <!-- Cabe√ßalho -->
    <header>
        <div class="container">
            <h1>üå± RaizAlerta</h1>
            <nav>
                <a href="index.html">Dashboard</a>
                <a href="localizacao.html">Localiza√ß√£o</a>
                <a href="guia.html">Guia</a>
                <a href="configuracoes.html" class="active">Configura√ß√µes</a>
            </nav>
        </div>
    </header>

    <!-- √Årea Principal -->
    <main class="config-main">
        <div class="container">
            <h1>‚öôÔ∏è Configura√ß√µes do Sistema</h1>
            
            <!-- Mensagem de Feedback -->
            <div id="feedbackMessage" class="feedback-message"></div>
            
            <!-- Se√ß√£o: Limites de Umidade -->
            <section class="config-section">
                <h3>üíß Configurar Limites de Umidade</h3>
                <div class="config-card">
                    <form id="limitsForm">
                        <div class="limits-grid">
                            <div class="form-group">
                                <label for="limitDryNormal">
                                    Limite Muito Seco ‚Üí Normal (%)
                                </label>
                                <input 
                                    type="number" 
                                    id="limitDryNormal" 
                                    name="limitDryNormal" 
                                    min="0" 
                                    max="100" 
                                    step="1"
                                    value="30"
                                    required
                                >
                                <small>Umidade abaixo deste valor = Muito Seco</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="limitNormalAlert">
                                    Limite Normal ‚Üí Alerta (%)
                                </label>
                                <input 
                                    type="number" 
                                    id="limitNormalAlert" 
                                    name="limitNormalAlert" 
                                    min="0" 
                                    max="100" 
                                    step="1"
                                    value="50"
                                    required
                                >
                                <small>Umidade entre anterior e este = Normal</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="limitAlertCritical">
                                    Limite Alerta ‚Üí Cr√≠tico (%)
                                </label>
                                <input 
                                    type="number" 
                                    id="limitAlertCritical" 
                                    name="limitAlertCritical" 
                                    min="0" 
                                    max="100" 
                                    step="1"
                                    value="70"
                                    required
                                >
                                <small>Umidade acima deste valor = Cr√≠tico</small>
                            </div>
                        </div>
                        
                        <!-- Visualiza√ß√£o dos Limites -->
                        <div class="limits-preview">
                            <h4>Visualiza√ß√£o das Faixas:</h4>
                            <div class="preview-bar">
                                <div class="preview-segment very-dry" id="previewVeryDry">
                                    <span>Muito Seco</span>
                                    <small>0-30%</small>
                                </div>
                                <div class="preview-segment normal" id="previewNormal">
                                    <span>Normal</span>
                                    <small>30-50%</small>
                                </div>
                                <div class="preview-segment alert" id="previewAlert">
                                    <span>Alerta</span>
                                    <small>50-70%</small>
                                </div>
                                <div class="preview-segment critical" id="previewCritical">
                                    <span>Cr√≠tico</span>
                                    <small>70-100%</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="loadCurrentLimits()">
                                Carregar Valores Atuais
                            </button>
                            <button type="submit" class="btn btn-primary">
                                Salvar Limites
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Se√ß√£o: Calibra√ß√£o dos Sensores -->
            <section class="config-section">
                <h3>üéØ Calibra√ß√£o dos Sensores</h3>
                <div class="config-card">
                    <form id="calibrationForm">
                        <div class="calibration-grid">
                            <!-- Sensor 1 -->
                            <div class="sensor-calibration">
                                <h4>Sensor 1</h4>
                                <div class="form-group">
                                    <label for="sensor1Dry">Valor Seco (0-4095):</label>
                                    <input 
                                        type="number" 
                                        id="sensor1Dry" 
                                        name="sensor1Dry" 
                                        min="0" 
                                        max="4095" 
                                        step="1"
                                        value="4095"
                                        required
                                    >
                                    <small>Leitura quando o solo est√° completamente seco</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="sensor1Wet">Valor √ömido (0-4095):</label>
                                    <input 
                                        type="number" 
                                        id="sensor1Wet" 
                                        name="sensor1Wet" 
                                        min="0" 
                                        max="4095" 
                                        step="1"
                                        value="0"
                                        required
                                    >
                                    <small>Leitura quando o solo est√° saturado</small>
                                </div>
                            </div>
                            
                            <!-- Sensor 2 -->
                            <div class="sensor-calibration">
                                <h4>Sensor 2</h4>
                                <div class="form-group">
                                    <label for="sensor2Dry">Valor Seco (0-4095):</label>
                                    <input 
                                        type="number" 
                                        id="sensor2Dry" 
                                        name="sensor2Dry" 
                                        min="0" 
                                        max="4095" 
                                        step="1"
                                        value="4095"
                                        required
                                    >
                                    <small>Leitura quando o solo est√° completamente seco</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="sensor2Wet">Valor √ömido (0-4095):</label>
                                    <input 
                                        type="number" 
                                        id="sensor2Wet" 
                                        name="sensor2Wet" 
                                        min="0" 
                                        max="4095" 
                                        step="1"
                                        value="0"
                                        required
                                    >
                                    <small>Leitura quando o solo est√° saturado</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="calibration-info">
                            <h4>‚ÑπÔ∏è Como Calibrar:</h4>
                            <ol>
                                <li>Para o valor seco: Deixe o sensor ao ar livre ou em solo completamente seco</li>
                                <li>Anote o valor mostrado no dashboard</li>
                                <li>Para o valor √∫mido: Mergulhe o sensor em √°gua ou solo saturado</li>
                                <li>Anote o valor mostrado no dashboard</li>
                                <li>Insira os valores acima e clique em "Calibrar Sensores"</li>
                            </ol>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="loadCurrentCalibration()">
                                Carregar Calibra√ß√£o Atual
                            </button>
                            <button type="submit" class="btn btn-primary">
                                Calibrar Sensores
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Se√ß√£o: Configura√ß√µes Avan√ßadas -->
            <section class="config-section">
                <h3>üîß Configura√ß√µes Avan√ßadas</h3>
                <div class="config-card">
                    <div class="advanced-settings">
                        <div class="setting-item">
                            <h4>Intervalo de Atualiza√ß√£o</h4>
                            <p>Configure com que frequ√™ncia o dashboard atualiza os dados automaticamente.</p>
                            <div class="form-group">
                                <label for="updateInterval">Intervalo (segundos):</label>
                                <select id="updateInterval" name="updateInterval">
                                    <option value="5">5 segundos</option>
                                    <option value="10" selected>10 segundos</option>
                                    <option value="30">30 segundos</option>
                                    <option value="60">1 minuto</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <h4>Notifica√ß√µes</h4>
                            <p>Configure quando receber alertas do sistema.</p>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" id="notifyAlert" checked>
                                    Notificar em n√≠vel de Alerta
                                </label>
                                <label>
                                    <input type="checkbox" id="notifyCritical" checked>
                                    Notificar em n√≠vel Cr√≠tico
                                </label>
                                <label>
                                    <input type="checkbox" id="notifySound" checked>
                                    Ativar som de alerta
                                </label>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-primary" onclick="saveAdvancedSettings()">
                            Salvar Configura√ß√µes Avan√ßadas
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Se√ß√£o: Informa√ß√µes do Sistema -->
            <section class="config-section">
                <h3>‚ÑπÔ∏è Informa√ß√µes do Sistema</h3>
                <div class="config-card">
                    <div class="system-info">
                        <div class="info-item">
                            <strong>Vers√£o do Firmware ESP32:</strong>
                            <span id="firmwareVersion">--</span>
                        </div>
                        <div class="info-item">
                            <strong>√öltima Atualiza√ß√£o:</strong>
                            <span id="lastUpdate">--</span>
                        </div>
                        <div class="info-item">
                            <strong>Tempo de Opera√ß√£o:</strong>
                            <span id="uptime">--</span>
                        </div>
                        <div class="info-item">
                            <strong>Mem√≥ria Livre:</strong>
                            <span id="freeMemory">--</span>
                        </div>
                    </div>
                    
                    <button type="button" class="btn btn-secondary" onclick="loadSystemInfo()">
                        Atualizar Informa√ß√µes
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Rodap√© -->
    <footer>
        <div class="container">
            <p>&copy; 2024 RaizAlerta - Sistema de Monitoramento de Umidade do Solo</p>
        </div>
    </footer>
</body>
</html>